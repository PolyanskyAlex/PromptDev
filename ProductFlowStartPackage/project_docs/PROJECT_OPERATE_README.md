# Архитектура и Руководство по Системе Правил AI-Агента

## 1. Введение
Этот документ — ваш путеводитель по системе правил, которая управляет работой AI-агента в данном проекте. Цель этой системы — максимально автоматизировать жизненный цикл разработки: от анализа единого JSON-манифеста до генерации готовой к работе структуры проекта.
Понимание этой архитектуры позволит вам эффективно запускать и контролировать проекты, минимизируя ручные операции.

## 2. Ключевая философия
- **Единый источник правды (JSON-манифест)**: Вся информация о проекте (архитектура, планы, задачи) содержится в одном мастер-документе — `project_docs/ai_executable_plan.json`. Этот формат выбран для максимальной надежности и простоты автоматического парсинга.
- **Автономный запуск**: Процесс инициализации проекта запускается одной простой командой. AI-агент самостоятельно оркестрирует все необходимые шаги.
- **Скрипты для рутины**: Задача по разбору JSON-манифеста и созданию множества файлов делегирована специализированному системному скрипту. Это обеспечивает 100% надежность парсинга.
- **Правила для исполнения**: Файлы .mdc используются AI-агентом уже после инициализации — как набор инструкций и стандартов для выполнения конкретных задач (кодирования, тестирования, деплоя).

## 3. Архитектурная схема рабочего процесса
Весь процесс инициализации проекта представляет собой автоматизированный пайплайн, запускаемый одной командой.

```
+----------------------------------------------------------+
|            ПОЛЬЗОВАТЕЛЬ (Ваши действия)                   |
+----------------------------------------------------------+
     |
     | 1. Создает/предоставляет JSON-манифест:
     |    `project_docs/ai_executable_plan.json`
     |
     | 2. Запускает парсер одним из способов:
     |    - Через исполняемый файл
     |    - Через go run
     V

+----------------------------------------------------------+
|               СИСТЕМНЫЙ СКРИПТ (Исполнение)               |
+----------------------------------------------------------+
     |
     | 1. Читает `project_docs/ai_executable_plan.json`
     | 2. Парсит JSON и создает артефакты:
     |
     +-----------------+------------------+-----------------+
     |                 |                  |                 |
     V                 V                  V                 V
+--------------+ +-------------+ +---------------+ +------------------+
| project_docs/| | project_docs/| | project_docs/ | | tasks/dev/      |
| SAD.md       | | dev_plan.md  | | deploy_plan.md| | tasks/deploy/   |
+--------------+ +-------------+ +---------------+ | (файлы задач)   |
                                                  +------------------+
     |
     V

+----------------------------------------------------------+
|            РЕЗУЛЬТАТ (Готовый проект)                     |
+----------------------------------------------------------+
     |
     | - Вся структура файлов создана
     | - Файлы задач и документации сгенерированы
     | - Система готова к работе
     V
```

## 4. Как пользоваться системой: пошаговое руководство

### Шаг 1: Скопировать папку .cursor/ в корень проекта.

### Шаг 2: Скопировать папку bin/ в корень проекта.

### Шаг 3: Подготовка мастер-документа (JSON-манифеста)
Убедитесь, что у вас есть файл `ai_executable_plan.json` в директории `project_docs/`.  
Примечание: 
AI-Executable Project Plan должен:
- быть валидным JSON-файлом, соответствующим схеме, описанной в "Инструкции по созданию AI-Executable Project Plan".
- содержать ключи: `solutionArchitecture`, `developmentPlan`, `deploymentPlan` и массив `tasks`.

### Шаг 4: Подготовка проекта
1. Установить параметр "Rule Type" для файлов .cursor\rules\mainRules.mdc и .cursor\rules\_common_principles.mdc на верхней панели в значение Always.
2. Дать команду в чат агента:
     "Добавь в memory следующие отдельные записи:
     1. Всегда ОБЯЗАТЕЛЬНО после выполнения задачи проверять, что все шаги из .cursor\pipelines\dev_pipeline.mdc выполнены - каждая строка от начала и до конца.
     2. SAD.md является критически важным документом и никогда не должен быть удален. Он должен всегда оставаться в project_docs/SAD.md.
     3. 1. Запрещается действовать, не прочитав полностью все правила. 2. Запрещается игнорировать хотя бы одну строку прочитанных правил.
     4. При любых действиях необходимо следовать правилам из .cursor\rules\mainRules.mdc и .cursor\rules\_common_principles.mdc, а также всем вложенным правилам, которые они указывают. При начале любого действия нужно явно сообщать, какими правилами руководствуюсь."
3. Дать команду в чат проекта:
"Выполни .cursor\rules\project_setup.mdc"

### Шаг 5: Выполнение работ
Дать команду в чат агенту "Выполни работы по проекту"

#Примечания
1. Агент любит забывать правила и даже заметки из Memory, поэтому может часто пропускать тестирование и формирование документации - это нужно контролировать.
2. Желательно напоминать агенту о правилах, например: "выполни задачу 1.0 соблюдая DCT правила .cursor\rules\mainRules.mdc, в том числе вложенные"
